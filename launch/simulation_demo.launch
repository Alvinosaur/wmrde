<?xml version="1.0"?>
<launch>

  <env name="ROSCONSOLE_CONFIG_FILE"
       value="$(find wmrde)/custom_rosconsole.config"/>

  <!-- Stock ROS joystick driver. -->
  <node name="joystick" pkg="joy" type="joy_node">
    <param name="dev" value="/dev/input/js0"/>
    <remap from="joy" to="/joy/source"/>
    <rosparam>
      deadzone: 0.15
    </rosparam>
  </node>

  <!-- joytf subscribes to joystick msgs and publishes a twist command.
       Can also broadcast a tf that moves according to twist command. -->

  <node name="joy_to_twist"
        pkg="wmrde"
        type="joy_to_twist">

    <remap from="joy" to="/joy/source"/>

  </node>

  <node name="simulation_demo"
        pkg="wmrde"
        type="simulation_demo">

    <rosparam subst_value="true">
      state_vec: [1.5, 0.0, 0.5, 0.0, 0.0, 0.0]
      update_rate_hz: 1.0
    </rosparam>
  </node>

  <node pkg="rviz" 
        type="rviz" 
        output="screen" 
        name="rviz" 
        args="-d $(find wmrde)/launch/simulation_demo.rviz"/>
</launch>
